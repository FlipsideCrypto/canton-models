version: 2

models:
  - name: core__fact_round_closes
    description: '{{ doc("core__fact_round_closes") }}'
    tests:
      - dbt_utils.recency:
          datepart: hour
          field: effective_at
          interval: 24
    columns:
      - name: update_id
        description: '{{ doc("col_update_id") }}'
        tests:
          - not_null
      - name: migration_id
        description: '{{ doc("col_migration_id") }}'
      - name: record_time
        description: '{{ doc("col_record_time") }}'
      - name: effective_at
        description: '{{ doc("col_effective_at") }}'
        tests:
          - not_null
      - name: event_id
        description: '{{ doc("col_event_id") }}'
        tests:
          - not_null
      - name: event_index
        description: '{{ doc("col_event_index") }}'
        tests:
          - not_null
      - name: round_number
        description: '{{ doc("col_round_number") }}'
        tests:
          - not_null
          - unique
      - name: amulet_to_issue_per_year
        description: '{{ doc("col_amulet_to_issue_per_year") }}'
      - name: validator_reward_percentage
        description: '{{ doc("col_validator_reward_percentage") }}'
      - name: app_reward_percentage
        description: '{{ doc("col_app_reward_percentage") }}'
      - name: validator_reward_cap
        description: '{{ doc("col_validator_reward_cap") }}'
      - name: featured_app_reward_cap
        description: '{{ doc("col_featured_app_reward_cap") }}'
      - name: unfeatured_app_reward_cap
        description: '{{ doc("col_unfeatured_app_reward_cap") }}'
      - name: validator_faucet_cap
        description: '{{ doc("col_validator_faucet_cap") }}'
      - name: amulet_price_usd
        description: '{{ doc("col_amulet_price_usd") }}'
      - name: tick_duration_microseconds
        description: '{{ doc("col_tick_duration_microseconds") }}'
      - name: dso_party
        description: '{{ doc("col_dso_party") }}'
      - name: event_type
        description: '{{ doc("col_event_type") }}'
      - name: contract_id
        description: '{{ doc("col_contract_id") }}'
      - name: package_name
        description: '{{ doc("col_package_name") }}'
      - name: template_id
        description: '{{ doc("col_template_id") }}'
      - name: created_at
        description: '{{ doc("col_created_at") }}'
      - name: signatories
        description: '{{ doc("col_signatories") }}'
      - name: observers
        description: '{{ doc("col_observers") }}'
      - name: issuance_config
        description: '{{ doc("col_issuance_config") }}'
      - name: event_json
        description: '{{ doc("col_event_json") }}'
      - name: fact_mining_round_id
        description: 'Surrogate key generated from round_number'
        tests:
          - not_null
          - unique
      - name: inserted_timestamp
        description: '{{ doc("col_inserted_timestamp") }}'
      - name: modified_timestamp
        description: '{{ doc("col_modified_timestamp") }}'
